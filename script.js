
const foodData = {
  "apple": {
    "type": "Healthy",
    "calories": 343,
    "protein": 10.4,
    "carbs": 43.6,
    "fat": 0.6,
    "fiber": 3.5,
    "sugar": 1.8,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "banana": {
    "type": "Healthy",
    "calories": 341,
    "protein": 12.5,
    "carbs": 40.1,
    "fat": 19.5,
    "fiber": 9.9,
    "sugar": 10.4,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "mango": {
    "type": "Healthy",
    "calories": 325,
    "protein": 8.6,
    "carbs": 32.9,
    "fat": 3.2,
    "fiber": 1.1,
    "sugar": 15.1,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "orange": {
    "type": "Healthy",
    "calories": 196,
    "protein": 12.7,
    "carbs": 36.8,
    "fat": 12.2,
    "fiber": 4.9,
    "sugar": 2.2,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "pineapple": {
    "type": "Healthy",
    "calories": 95,
    "protein": 4.3,
    "carbs": 44.2,
    "fat": 18.2,
    "fiber": 4.7,
    "sugar": 18.9,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "papaya": {
    "type": "Healthy",
    "calories": 322,
    "protein": 6.3,
    "carbs": 23.6,
    "fat": 0.1,
    "fiber": 5.7,
    "sugar": 17.1,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "grapes": {
    "type": "Healthy",
    "calories": 164,
    "protein": 7.4,
    "carbs": 50.4,
    "fat": 1.3,
    "fiber": 7.0,
    "sugar": 4.5,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "watermelon": {
    "type": "Healthy",
    "calories": 211,
    "protein": 14.4,
    "carbs": 57.0,
    "fat": 15.7,
    "fiber": 7.4,
    "sugar": 13.3,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "guava": {
    "type": "Healthy",
    "calories": 236,
    "protein": 7.4,
    "carbs": 27.5,
    "fat": 17.2,
    "fiber": 9.2,
    "sugar": 3.4,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "carrot": {
    "type": "Healthy",
    "calories": 48,
    "protein": 12.0,
    "carbs": 7.3,
    "fat": 12.5,
    "fiber": 7.3,
    "sugar": 22.2,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "potato": {
    "type": "Moderate",
    "calories": 53,
    "protein": 4.3,
    "carbs": 17.2,
    "fat": 2.5,
    "fiber": 3.8,
    "sugar": 8.6,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "onion": {
    "type": "Moderate",
    "calories": 80,
    "protein": 2.6,
    "carbs": 31.4,
    "fat": 5.3,
    "fiber": 5.2,
    "sugar": 1.3,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "tomato": {
    "type": "Moderate",
    "calories": 167,
    "protein": 12.7,
    "carbs": 9.8,
    "fat": 9.4,
    "fiber": 9.7,
    "sugar": 9.9,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "spinach": {
    "type": "Healthy",
    "calories": 109,
    "protein": 7.1,
    "carbs": 51.3,
    "fat": 7.7,
    "fiber": 4.0,
    "sugar": 22.5,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "broccoli": {
    "type": "Healthy",
    "calories": 263,
    "protein": 11.6,
    "carbs": 14.9,
    "fat": 12.9,
    "fiber": 3.0,
    "sugar": 23.8,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "cauliflower": {
    "type": "Healthy",
    "calories": 49,
    "protein": 8.6,
    "carbs": 39.0,
    "fat": 10.4,
    "fiber": 7.1,
    "sugar": 5.6,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "beans": {
    "type": "Healthy",
    "calories": 307,
    "protein": 9.9,
    "carbs": 58.0,
    "fat": 16.7,
    "fiber": 6.7,
    "sugar": 15.4,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "peas": {
    "type": "Healthy",
    "calories": 180,
    "protein": 12.3,
    "carbs": 45.6,
    "fat": 17.6,
    "fiber": 3.2,
    "sugar": 12.8,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "rice": {
    "type": "Healthy",
    "calories": 70,
    "protein": 5.8,
    "carbs": 59.9,
    "fat": 10.6,
    "fiber": 8.0,
    "sugar": 5.0,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "chapati": {
    "type": "Healthy",
    "calories": 175,
    "protein": 6.6,
    "carbs": 43.3,
    "fat": 7.4,
    "fiber": 5.8,
    "sugar": 9.0,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "roti": {
    "type": "Healthy",
    "calories": 148,
    "protein": 5.4,
    "carbs": 26.3,
    "fat": 4.7,
    "fiber": 1.5,
    "sugar": 2.5,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "dosa": {
    "type": "Healthy",
    "calories": 174,
    "protein": 2.0,
    "carbs": 43.3,
    "fat": 17.3,
    "fiber": 5.2,
    "sugar": 14.9,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "idli": {
    "type": "Healthy",
    "calories": 300,
    "protein": 6.7,
    "carbs": 58.9,
    "fat": 14.6,
    "fiber": 1.1,
    "sugar": 8.5,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "sambar": {
    "type": "Healthy",
    "calories": 218,
    "protein": 8.7,
    "carbs": 21.1,
    "fat": 8.8,
    "fiber": 1.5,
    "sugar": 4.3,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "rasam": {
    "type": "Healthy",
    "calories": 322,
    "protein": 13.5,
    "carbs": 9.9,
    "fat": 19.4,
    "fiber": 4.5,
    "sugar": 22.2,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "poha": {
    "type": "Healthy",
    "calories": 334,
    "protein": 10.4,
    "carbs": 14.1,
    "fat": 12.6,
    "fiber": 6.0,
    "sugar": 13.1,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "upma": {
    "type": "Healthy",
    "calories": 173,
    "protein": 6.7,
    "carbs": 21.4,
    "fat": 4.8,
    "fiber": 6.8,
    "sugar": 15.3,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "curd rice": {
    "type": "Healthy",
    "calories": 172,
    "protein": 12.9,
    "carbs": 14.4,
    "fat": 11.1,
    "fiber": 2.7,
    "sugar": 18.1,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "chicken curry": {
    "type": "Moderate",
    "calories": 143,
    "protein": 13.9,
    "carbs": 11.8,
    "fat": 14.1,
    "fiber": 9.0,
    "sugar": 18.4,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "fish curry": {
    "type": "Moderate",
    "calories": 208,
    "protein": 3.4,
    "carbs": 26.0,
    "fat": 15.9,
    "fiber": 6.2,
    "sugar": 17.3,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "egg curry": {
    "type": "Moderate",
    "calories": 68,
    "protein": 14.0,
    "carbs": 26.0,
    "fat": 4.5,
    "fiber": 8.8,
    "sugar": 14.6,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "grilled chicken": {
    "type": "Moderate",
    "calories": 274,
    "protein": 1.1,
    "carbs": 47.5,
    "fat": 2.6,
    "fiber": 4.4,
    "sugar": 23.1,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "fried chicken": {
    "type": "Moderate",
    "calories": 303,
    "protein": 1.2,
    "carbs": 41.6,
    "fat": 2.2,
    "fiber": 2.7,
    "sugar": 11.1,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "burger": {
    "type": "Junk",
    "calories": 269,
    "protein": 5.3,
    "carbs": 31.2,
    "fat": 4.7,
    "fiber": 6.2,
    "sugar": 11.3,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "pizza": {
    "type": "Junk",
    "calories": 203,
    "protein": 13.2,
    "carbs": 5.8,
    "fat": 6.1,
    "fiber": 7.8,
    "sugar": 8.0,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "french fries": {
    "type": "Junk",
    "calories": 344,
    "protein": 8.2,
    "carbs": 40.9,
    "fat": 8.8,
    "fiber": 8.4,
    "sugar": 18.2,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "soft drink": {
    "type": "Junk",
    "calories": 305,
    "protein": 8.7,
    "carbs": 22.4,
    "fat": 16.7,
    "fiber": 8.6,
    "sugar": 4.4,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "ice cream": {
    "type": "Junk",
    "calories": 257,
    "protein": 9.6,
    "carbs": 20.0,
    "fat": 2.7,
    "fiber": 5.2,
    "sugar": 1.6,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "chocolate": {
    "type": "Moderate",
    "calories": 175,
    "protein": 10.1,
    "carbs": 14.8,
    "fat": 6.8,
    "fiber": 5.4,
    "sugar": 14.9,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "cake": {
    "type": "Junk",
    "calories": 115,
    "protein": 13.0,
    "carbs": 46.3,
    "fat": 4.2,
    "fiber": 7.7,
    "sugar": 11.7,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "milk": {
    "type": "Moderate",
    "calories": 131,
    "protein": 9.6,
    "carbs": 26.6,
    "fat": 9.6,
    "fiber": 3.2,
    "sugar": 12.1,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "curd": {
    "type": "Moderate",
    "calories": 273,
    "protein": 3.6,
    "carbs": 39.6,
    "fat": 8.3,
    "fiber": 2.1,
    "sugar": 2.5,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "buttermilk": {
    "type": "Moderate",
    "calories": 79,
    "protein": 6.7,
    "carbs": 55.3,
    "fat": 2.2,
    "fiber": 3.8,
    "sugar": 4.6,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "paneer": {
    "type": "Moderate",
    "calories": 195,
    "protein": 3.2,
    "carbs": 13.3,
    "fat": 18.0,
    "fiber": 9.0,
    "sugar": 21.7,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "dal": {
    "type": "Moderate",
    "calories": 275,
    "protein": 11.9,
    "carbs": 23.5,
    "fat": 12.2,
    "fiber": 8.7,
    "sugar": 3.5,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "rajma": {
    "type": "Moderate",
    "calories": 193,
    "protein": 11.4,
    "carbs": 35.5,
    "fat": 7.3,
    "fiber": 5.2,
    "sugar": 21.3,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "chole": {
    "type": "Moderate",
    "calories": 292,
    "protein": 7.7,
    "carbs": 47.5,
    "fat": 2.5,
    "fiber": 5.7,
    "sugar": 0.8,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "biryani": {
    "type": "Moderate",
    "calories": 206,
    "protein": 8.4,
    "carbs": 48.4,
    "fat": 18.2,
    "fiber": 6.9,
    "sugar": 19.4,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "pulao": {
    "type": "Moderate",
    "calories": 202,
    "protein": 3.9,
    "carbs": 26.2,
    "fat": 8.3,
    "fiber": 8.2,
    "sugar": 8.7,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "orange juice": {
    "type": "Moderate",
    "calories": 103,
    "protein": 8.3,
    "carbs": 10.4,
    "fat": 17.9,
    "fiber": 4.2,
    "sugar": 6.0,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "apple juice": {
    "type": "Moderate",
    "calories": 226,
    "protein": 7.2,
    "carbs": 29.1,
    "fat": 12.8,
    "fiber": 6.2,
    "sugar": 21.2,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "mango juice": {
    "type": "Moderate",
    "calories": 324,
    "protein": 3.7,
    "carbs": 6.5,
    "fat": 18.8,
    "fiber": 2.1,
    "sugar": 23.2,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  },
  "sugarcane juice": {
    "type": "Moderate",
    "calories": 99,
    "protein": 4.3,
    "carbs": 22.2,
    "fat": 14.1,
    "fiber": 9.4,
    "sugar": 3.6,
    "advantages": [
      "Provides energy",
      "Contains essential nutrients"
    ],
    "disadvantages": [
      "Overconsumption may cause imbalance"
    ]
  }
};

const searchInput = document.getElementById("search");
const suggestions = document.getElementById("suggestions");

searchInput.addEventListener("input", ()=>{
    suggestions.innerHTML="";
    const val = searchInput.value.toLowerCase();
    if(!val) return;
    Object.keys(foodData).filter(f=>f.startsWith(val)).slice(0,10).forEach(f=>{
        const d=document.createElement("div");
        d.innerText=f;
        d.onclick=()=>{searchInput.value=f;suggestions.innerHTML="";};
        suggestions.appendChild(d);
    });
});

searchInput.addEventListener("keydown", e=>{if(e.key==="Enter") searchFood();});

function searchFood(){
    const f = searchInput.value.toLowerCase();
    if(!foodData[f]){alert("Food not found");return;}
    const d = foodData[f];
    document.getElementById("result").innerHTML=`
    <h2>${f.toUpperCase()} â€” ${d.type}</h2>
    <p>Calories: ${d.calories} kcal</p>
    <p>Protein: ${d.protein} g</p>
    <p>Carbs: ${d.carbs} g</p>
    <p>Fat: ${d.fat} g</p>
    <p>Fiber: ${d.fiber} g</p>
    <p>Sugar: ${d.sugar} g</p>
    <h3>Advantages</h3><ul>${d.advantages.map(a=>"<li>"+a+"</li>").join("")}</ul>
    <h3>Disadvantages</h3><ul>${d.disadvantages.map(a=>"<li>"+a+"</li>").join("")}</ul>
    `;
}

let model, webcam;
async function startCamera(){
    const url=document.getElementById("modelURL").value;
    model = await tmImage.load(url+"model.json", url+"metadata.json");
    webcam = new tmImage.Webcam(200,200,true);
    await webcam.setup();
    await webcam.play();
    document.getElementById("camera").appendChild(webcam.canvas);
    window.requestAnimationFrame(loop);
}

async function loop(){
    webcam.update();
    const p = await model.predict(webcam.canvas);
    document.getElementById("prediction").innerText =
        p.sort((a,b)=>b.probability-a.probability)[0].className;
    window.requestAnimationFrame(loop);
}
